<div class="modal-overlay" *ngIf="visible" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">

    <div class="modal-header">
      <h3>üë§ Th√¥ng tin kh√°ch h√†ng</h3>
      <button class="modal-close" (click)="closeModal()">‚úï</button>
    </div>

    <div class="modal-body">
      <form #customerForm="ngForm" class="modal-form">

        <!-- Nh√≥m kh√°ch h√†ng v√† M√£ -->
        <div class="form-row">
          <div class="form-field">
            <label>Nh√≥m kh√°ch h√†ng <span class="required">*</span></label>
            
            <div class="group-select-wrap">
              <select class="form-input group-select" 
                      [(ngModel)]="customer.groupID" 
                      name="groupID"
                      #groupID="ngModel"
                      required>
                <option [value]="null">Ch·ªçn nh√≥m</option>
                <option *ngFor="let group of groups" [value]="group.id">
                  {{group.code}} - {{group.name}}
                </option>
              </select>

              <!-- Icon m≈©i t√™n xu·ªëng -->
              <i class="pi pi-angle-down select-arrow"></i>
              <!-- Icon + -->
              <button class="group-add-btn" type="button" (click)="openAddGroup()">
                <i class="pi pi-plus-circle"></i>
              </button>
            </div>
            
            <!-- Th√¥ng b√°o l·ªói -->
            <div class="error-message" *ngIf="groupID.invalid && (groupID.dirty || groupID.touched || submitted)">
              <small *ngIf="groupID.errors?.['required']"> <i class="pi pi-info-circle"></i>Vui l√≤ng ch·ªçn nh√≥m kh√°ch h√†ng</small>
            </div>
          </div>

          <div class="form-field">
            <label>M√£ nh√≥m</label>
            <input 
              [value]="customer.code || 'T·ª± ƒë·ªông sinh'" 
              disabled 
              class="readonly-input"
              placeholder="T·ª± ƒë·ªông sinh sau khi l∆∞u"
            >
          </div>
        </div>

        <div class="form-row">
          <div class="form-field">
            <label>H·ªç v√† t√™n <span class="required">*</span></label>
            <input [(ngModel)]="customer.name" 
                   name="name"
                   #name="ngModel"
                   required>
            <div class="error-message" *ngIf="name.invalid && (name.dirty || name.touched || submitted)">
              <small *ngIf="name.errors?.['required']"><i class="pi pi-info-circle"></i> Vui l√≤ng nh·∫≠p h·ªç v√† t√™n</small>
            </div>
          </div>

          <div class="form-field">
            <label>S·ªë ƒëi·ªán tho·∫°i</label>
            <input [(ngModel)]="customer.phone" name="phone">
          </div>
        </div>

        <div class="form-row">
          <div class="form-field">
            <label>M√£ s·ªë thu·∫ø</label>
            <input [(ngModel)]="customer.taxCode" name="taxCode">
          </div>

          <div class="form-field">
            <label>CCCD/CMND</label>
            <input [(ngModel)]="customer.cccd" name="cccd">
          </div>
        </div>

        <div class="form-field full-width">
          <label>Email</label>
          <input [(ngModel)]="customer.email" name="email">
        </div>

        <div class="form-field full-width">
          <label>ƒê·ªãa ch·ªâ</label>
          <textarea [(ngModel)]="customer.address" name="address"></textarea>
        </div>

      </form>
    </div>

    <div class="modal-footer">
      <button class="modal-btn cancel" (click)="closeModal()">H·ªßy</button>
      <button class="modal-btn save" (click)="saveModal()">
        <i class="pi pi-check" style="vertical-align:-2px"></i>
         L∆∞u
      </button>
    </div>

  </div>
</div>
<app-group-modal 
  [show]="showGroupModal"
  [group]="editingGroup"
  (closeModal)="handleCloseGroupModal()"
  (onSubmit)="handleSubmitGroup($event)"
  (onDelete)="handleDeleteGroup($event)"
></app-group-modal>