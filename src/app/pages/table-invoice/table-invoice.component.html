<div class="pos-layout">

  <!-- ===================== MENU PANEL ===================== -->
  <div class="menu-panel">
    <h3 class="panel-title">Danh sÃ¡ch sáº£n pháº©m</h3>
    
    <!-- FILTER CONTROLS -->
    <div class="menu-filters">
      <!-- Search -->
      <div class="filter-search">
        <span class="search-icon">ğŸ”</span>
        <input 
          type="text" 
          [(ngModel)]="searchText" 
          (ngModelChange)="onSearchChange()"
          placeholder="QuÃ©t mÃ£ váº¡ch hoáº·c tÃ¬m tÃªn sáº£n pháº©m...">
      </div>
      
      <!-- Category Tabs -->
      <div class="filter-tabs">
        <button 
          class="filter-tab"
          [class.active]="selectedCategory === 'all'"
          (click)="selectedCategory = 'all'; onCategoryChange()">
          ğŸ½ï¸ Táº¥t cáº£
        </button>
        <button 
          *ngFor="let cat of categories"
          [hidden]="cat === 'all'"
          class="filter-tab"
          [class.active]="selectedCategory === cat"
          (click)="selectedCategory = cat; onCategoryChange()">
          {{ cat === 'Báº¿p' ? 'ğŸ³' : cat === 'Bar' ? 'ğŸ¹' : 'ğŸ“¦' }} {{ cat }}
        </button>
      </div>
    </div>
    
    <!-- MENU LIST -->
    <div class="menu-list">
      <div class="menu-item"
           *ngFor="let m of filteredMenu"
           (click)="addItem(m)">
        <div class="menu-item-image">
          {{ m.category === 'Báº¿p' ? 'ğŸ³' : m.category === 'Bar' ? 'ğŸ¹' : 'ğŸ“¦' }}
          <span class="menu-item-stock">x{{ m.stock || 15 }}</span>
        </div>
        <div class="menu-item-info">
          <div class="menu-name">{{ m.name }}</div>
          <div class="menu-price">{{ m.price | number }}Ä‘</div>
        </div>
      </div>
      
      <!-- Empty state -->
      <div *ngIf="filteredMenu.length === 0" class="menu-empty" style="grid-column: 1/-1;">
        <p>âŒ KhÃ´ng tÃ¬m tháº¥y sáº£n pháº©m nÃ o</p>
      </div>
    </div>
  </div>

  <!-- ===================== INVOICE PANEL ===================== -->
  <div class="invoice-panel">

    <!-- HEADER -->
    <div class="invoice-header">
      <div class="header-left">
        <h3>{{ tableName || 'ÄÆ¡n hÃ ng #' + tableId }}</h3>
        <div>â° Giá» vÃ o: {{ startTime | date:'HH:mm dd/MM/yyyy' }}</div>
        <div>ğŸ‘¤ Thu ngÃ¢n: <b>{{ cashier }}</b></div>
      </div>

      <div class="header-right">
        <div class="time">
          <div>â±ï¸ Phá»¥c vá»¥: {{ serviceMinutes }} phÃºt</div>
        </div>
        <div class="grand-total">
          {{ total | number }}Ä‘
        </div>
      </div>
    </div>

    <!-- CUSTOMER INFO -->
    <div class="customer-info">
      <div class="customer-display">
        <h4>ğŸ‘¤ ThÃ´ng tin khÃ¡ch hÃ ng</h4>
        <div class="customer-details" *ngIf="customerName || customerPhone">
          <span><strong>{{ customerName || 'KhÃ¡ch láº»' }}</strong></span>
          <span *ngIf="customerPhone">ğŸ“ {{ customerPhone }}</span>
        </div>
        <div class="customer-details" *ngIf="!customerName && !customerPhone">
          <span class="empty">ChÆ°a cÃ³ thÃ´ng tin khÃ¡ch hÃ ng</span>
        </div>
      </div>
      <button class="add-customer-btn" (click)="openCustomerModal()">
        {{ customerName ? 'âœï¸ Sá»­a' : 'â• ThÃªm' }}
      </button>
    </div>

    <!-- ITEMS -->
    <div class="invoice-items">
      <div class="item-row" *ngFor="let i of items">
        <div class="item-name">{{ i.productName }}</div>

        <div class="qty-control">
          <button (click)="decrease(i)">âˆ’</button>
          <span class="qty">{{ i.quantity }}</span>
          <button (click)="increase(i)">+</button>
        </div>

        <div class="item-price">
          {{ i.unitPrice * i.quantity | number }}Ä‘
        </div>

        <button class="remove" (click)="remove(i)">âœ•</button>
      </div>
    </div>

    <!-- SUMMARY -->
    <div class="summary">
      <div class="line">
        <span>Táº¡m tÃ­nh</span>
        <span>{{ subTotal | number }}Ä‘</span>
      </div>
      <div class="line">
        <span>VAT (10%)</span>
        <span>{{ vat | number }}Ä‘</span>
      </div>
      <div class="line total">
        <b>Tá»•ng thanh toÃ¡n</b>
        <b>{{ total | number }}Ä‘</b>
      </div>

      <button class="pay" [disabled]="items.length === 0" (click)="saveInvoice()">
        Thanh toÃ¡n
      </button>
    </div>

  </div>
</div>

<!-- ===================== CUSTOMER MODAL ===================== -->
<app-customer-modal
  [visible]="showCustomerModal"
  [customer]="customer"
  (close)="closeCustomerModal()"
  (save)="saveCustomerInfo($event)">
</app-customer-modal>


    
  
