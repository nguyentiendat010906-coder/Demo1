<div class="pos-layout">

  <!-- MENU -->
  <div class="menu-panel">
    <h3 class="panel-title">Menu</h3>
    
    <!-- FILTER CONTROLS -->
    <div class="menu-filters">
      <!-- Category Filter -->
      <div class="filter-group">
        <label>Nh√≥m m√≥n:</label>
        <select [(ngModel)]="selectedCategory" (ngModelChange)="onCategoryChange()" class="filter-select">
          <option value="all">üçΩÔ∏è T·∫•t c·∫£</option>
          <option *ngFor="let cat of categories" [value]="cat" [hidden]="cat === 'all'">
            {{ cat === 'B·∫øp' ? 'üç≥' : cat === 'Bar' ? 'üçπ' : 'üì¶' }} {{ cat }}
          </option>
        </select>
      </div>
      
      <!-- Search -->
      <div class="filter-group">
        <label>T√¨m ki·∫øm:</label>
        <input 
          type="text" 
          [(ngModel)]="searchText" 
          (ngModelChange)="onSearchChange()"
          placeholder="üîç Nh·∫≠p t√™n m√≥n..." 
          class="filter-input">
      </div>
    </div>
    
    <!-- MENU LIST -->
    <div class="menu-list">
      <div class="menu-item"
           *ngFor="let m of filteredMenu"
           (click)="addItem(m)">
        <span class="menu-name">{{ m.name }}</span>
        <span class="menu-price">{{ m.price | number }} ƒë</span>
      </div>
      
      <!-- Empty state -->
      <div *ngIf="filteredMenu.length === 0" class="menu-empty">
        <p>Kh√¥ng t√¨m th·∫•y m√≥n n√†o</p>
      </div>
    </div>
  </div>

  <!-- INVOICE -->
  <div class="invoice-panel">

    <!-- HEADER -->
    <div class="invoice-header">
      <div class="header-left">
        <h3>{{ tableName || 'B√†n ' + tableId }}</h3>
        <div>Nh√≥m: <b>{{ groupName }}</b></div>
        <div>Thu ng√¢n: <b>{{ cashier }}</b></div>
      </div>

      <div class="header-right">
        <div class="time">
          <div>Gi·ªù v√†o: {{ startTime | date:'HH:mm dd/MM/yyyy' }}</div>
          <div>Ph·ª•c v·ª•: {{ serviceMinutes }} ph√∫t</div>
        </div>
        <div class="grand-total">
          {{ total | number }} ƒë
        </div>
      </div>
    </div>

    <!-- CUSTOMER INFO -->
    <div class="customer-info">
      <h4>Th√¥ng tin kh√°ch h√†ng</h4>
      <div class="customer-form">
        <div class="form-group">
          <label>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="16" height="16">
              <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
            T√™n kh√°ch h√†ng:
          </label>
          <input 
            type="text" 
            [(ngModel)]="customerName" 
            (blur)="updateCustomerInfo()"
            placeholder="Nh·∫≠p t√™n kh√°ch h√†ng..." 
            class="customer-input">
        </div>
        
        <div class="form-group">
          <label>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="16" height="16">
              <path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"/>
            </svg>
            S·ªë ƒëi·ªán tho·∫°i:
          </label>
          <input 
            type="tel" 
            [(ngModel)]="customerPhone" 
            (blur)="updateCustomerInfo()"
            placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i..." 
            class="customer-input">
        </div>
      </div>
    </div>

    <!-- ITEMS -->
    <div class="invoice-items">
      <div class="item-row" *ngFor="let i of items">
        <div class="item-name">{{ i.productName }}</div>

        <div class="qty-control">
          <button (click)="decrease(i)">-</button>
          <span class="qty">{{ i.quantity }}</span>
          <button (click)="increase(i)">+</button>
        </div>

        <div class="item-price">
          {{ i.unitPrice * i.quantity | number }} ƒë
        </div>

        <button class="remove" (click)="remove(i)">‚úï</button>
      </div>
    </div>

    <!-- SUMMARY -->
    <div class="summary">
      <div class="line">
        <span>T·∫°m t√≠nh</span>
        <span>{{ subTotal | number }} ƒë</span>
      </div>
      <div class="line">
        <span>VAT (10%)</span>
        <span>{{ vat | number }} ƒë</span>
      </div>
      <div class="line total">
        <b>Thanh to√°n</b>
        <b>{{ total | number }} ƒë</b>
      </div>

      <button class="pay" [disabled]="items.length === 0" (click)="saveInvoice()">Thanh to√°n</button>
    </div>

  </div>
</div>