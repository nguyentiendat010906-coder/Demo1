<div class="customer-page">
<h2 class="title">Kh√°ch h√†ng</h2>

<!-- SEARCH BAR -->
<div class="search-input">
  <svg class="icon" viewBox="0 0 24 24">
    <circle cx="11" cy="11" r="7"></circle>
    <line x1="16.5" y1="16.5" x2="21" y2="21"></line>
  </svg>
  <input type="text" placeholder="T√¨m ki·∫øm kh√°ch h√†ng..." />
</div>

<div class="table-wrapper" *ngIf="customers.length; else empty">
  <table>
    <thead>
      <tr>
        <th>T√™n kh√°ch h√†ng</th>
        <th>S·ªë ƒëi·ªán tho·∫°i</th>
        <th>ƒê·ªãa ch·ªâ</th>
        <th>Thao t√°c</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let c of customers">
        <td>{{ c.name }}</td>
        <td>{{ c.phone }}</td>
        <td>{{ c.address || '‚Äî' }}</td>
        <td>
          <button class="btn-view" (click)="viewDetail(c)">üëÅÔ∏è Xem</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<ng-template #empty>
  <p class="empty">Ch∆∞a c√≥ kh√°ch h√†ng</p>
</ng-template>

<!-- ===================== CUSTOMER MODAL - EDIT MODE ONLY ===================== -->
<div class="modal-overlay" *ngIf="selectedCustomer" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    
    <!-- Modal Header -->
    <div class="modal-header">
      <h3>üë§ Ch·ªânh s·ª≠a th√¥ng tin</h3>
      <button class="modal-close" (click)="closeModal()">‚úï</button>
    </div>
    
    <!-- Modal Body - FORM EDIT -->
    <div class="modal-body">
      <form class="modal-form">
        
        <!-- Row 1: H·ªç t√™n & S·ªë ƒëi·ªán tho·∫°i -->
        <div class="form-row">
          <div class="form-field">
            <label>
              H·ªç v√† t√™n <span class="required">*</span>
            </label>
            <input 
              type="text" 
              [(ngModel)]="selectedCustomer.name"
              name="customerName"
              placeholder="Nh·∫≠p h·ªç v√† t√™n..."
              required>
          </div>
          
          <div class="form-field">
            <label>
              S·ªë ƒëi·ªán tho·∫°i <span class="required">*</span>
            </label>
            <input 
              type="tel" 
              [(ngModel)]="selectedCustomer.phone"
              name="customerPhone"
              placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i..."
              required>
          </div>
        </div>
        
        <!-- Row 2: M√£ s·ªë thu·∫ø & S·ªë CCCD -->
        <div class="form-row">
          <div class="form-field">
            <label>M√£ s·ªë thu·∫ø</label>
            <input 
              type="text" 
              [(ngModel)]="selectedCustomer.taxCode"
              name="customerTaxCode"
              placeholder="Nh·∫≠p m√£ s·ªë thu·∫ø...">
          </div>
          
          <div class="form-field">
            <label>S·ªë CCCD/CMND</label>
            <input 
              type="text" 
              [(ngModel)]="selectedCustomer.idCard"
              name="customerIdCard"
              placeholder="Nh·∫≠p s·ªë CCCD/CMND...">
          </div>
        </div>
        
        <!-- Row 3: Email -->
        <div class="form-field full-width">
          <label>Email</label>
          <input 
            type="email" 
            [(ngModel)]="selectedCustomer.email"
            name="customerEmail"
            placeholder="Nh·∫≠p ƒë·ªãa ch·ªâ email...">
        </div>
        
        <!-- Row 4: ƒê·ªãa ch·ªâ -->
        <div class="form-field full-width">
          <label>ƒê·ªãa ch·ªâ</label>
          <textarea 
            [(ngModel)]="selectedCustomer.address"
            name="customerAddress"
            placeholder="Nh·∫≠p ƒë·ªãa ch·ªâ ƒë·∫ßy ƒë·ªß..."></textarea>
        </div>
        
      </form>
    </div>
    
    <!-- Modal Footer -->
    <div class="modal-footer">
      <button class="modal-btn delete" (click)="deleteCustomer()">
        üóëÔ∏è X√≥a
      </button>
      <div class="right-btns">
        <button class="modal-btn cancel" (click)="closeModal()">
          ƒê√≥ng
        </button>
        <button class="modal-btn save" (click)="saveCustomer()">
          üíæ L∆∞u
        </button>
      </div>
    </div>
    
  </div>
</div>
</div>